<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pusat Mini App Futuristik</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6e45e2;
            --secondary: #89d4cf;
            --dark: #111827;
            --light: #f3f4f6;
        }
        
        body {
            font-family: 'Roboto', sans-serif;
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            color: white;
            min-height: 100vh;
        }
        
        .futuristic-font {
            font-family: 'Orbitron', sans-serif;
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .grid-item {
            transition: all 0.3s ease;
            transform-style: preserve-3d;
        }
        
        .grid-item:hover {
            transform: translateY(-5px) scale(1.03);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.3);
        }
        
        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        
        .floating {
            animation: float 6s ease-in-out infinite;
        }
        
        .glow {
            box-shadow: 0 0 15px rgba(110, 69, 226, 0.5);
        }
        
        .glow:hover {
            box-shadow: 0 0 25px rgba(110, 69, 226, 0.8);
        }
    </style>
</head>
<body class="min-h-screen p-4 md:p-8">
    <div class="container mx-auto">
        <!-- Header -->
        <header class="text-center mb-12">
            <h1 class="futuristic-font text-4xl md:text-6xl font-bold mb-4 bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-cyan-300">
                PUSAT MINI APP
            </h1>
            <p class="text-gray-300 max-w-2xl mx-auto">
                Aplikasi mini favorit Anda dalam satu tempat. Tambah, edit, dan hapus sesuai kebutuhan Anda.
            </p>
        </header>

        <!-- Main Content -->
        <main>
            <!-- GitHub Configuration Section -->
            <div class="glass-card p-6 mb-8">
                <h2 class="futuristic-font text-xl md:text-2xl font-semibold mb-4">Konfigurasi GitHub</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                        <label for="githubUsername" class="block text-sm font-medium mb-1">Username GitHub</label>
                        <input type="text" id="githubUsername" placeholder="usernameAnda" 
                            class="w-full px-4 py-2 rounded-lg bg-gray-700 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-purple-500">
                    </div>
                    <div>
                        <label for="githubRepo" class="block text-sm font-medium mb-1">Nama Repository</label>
                        <input type="text" id="githubRepo" placeholder="nama-repository" 
                            class="w-full px-4 py-2 rounded-lg bg-gray-700 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-purple-500">
                    </div>
                    <div>
                        <label for="githubToken" class="block text-sm font-medium mb-1">Token PAT GitHub</label>
                        <input type="password" id="githubToken" placeholder="ghp_xxxxxxxx" 
                            class="w-full px-4 py-2 rounded-lg bg-gray-700 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-purple-500">
                    </div>
                </div>
                <div class="flex justify-end mt-4">
                    <button id="saveConfigBtn" class="px-6 py-2 bg-gradient-to-r from-purple-500 to-cyan-500 rounded-lg font-medium hover:opacity-90 transition">
                        Simpan Konfigurasi
                    </button>
                </div>
            </div>

            <!-- Add Mini App Section -->
            <div class="glass-card p-6 mb-8">
                <h2 class="futuristic-font text-xl md:text-2xl font-semibold mb-4">Tambah Mini App Baru</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="appImage" class="block text-sm font-medium mb-1">Logo/Gambar Mini App</label>
                        <div class="flex items-center justify-center w-full">
                            <label for="appImage" class="flex flex-col items-center justify-center w-full h-48 border-2 border-gray-600 border-dashed rounded-lg cursor-pointer bg-gray-700 hover:bg-gray-900 hover:border-purple-500 transition">
                                <div class="flex flex-col items-center justify-center pt-5 pb-6">
                                    <svg class="w-10 h-10 mb-3 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path>
                                    </svg>
                                    <p class="mb-2 text-sm text-gray-400"><span class="font-semibold">Klik untuk mengunggah</span></p>
                                    <p class="text-xs text-gray-400">SVG, PNG, JPG (MAX. 2MB)</p>
                                </div>
                                <input id="appImage" type="file" accept="image/*" class="hidden" />
                            </label>
                        </div>
                    </div>
                    <div>
                        <div class="mb-4">
                            <label for="appName" class="block text-sm font-medium mb-1">Nama Mini App</label>
                            <input type="text" id="appName" placeholder="Nama aplikasi" 
                                class="w-full px-4 py-2 rounded-lg bg-gray-700 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-purple-500">
                        </div>
                        <div class="mb-4">
                            <label for="appLink" class="block text-sm font-medium mb-1">Link Mini App</label>
                            <input type="url" id="appLink" placeholder="https://example.com" 
                                class="w-full px-4 py-2 rounded-lg bg-gray-700 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-purple-500">
                        </div>
                        <button id="addAppBtn" class="w-full px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg font-medium hover:opacity-90 transition glow">
                            + Tambah Mini App
                        </button>
                    </div>
                </div>
            </div>

            <!-- Mini Apps Grid -->
            <div class="">
                <h2 class="futuristic-font text-xl md:text-2xl font-semibold mb-6">Mini Apps Anda</h2>
                <div id="appsGrid" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- Apps will be dynamically added here -->
                    <!-- Sample app for illustration -->
                    <div class="grid-item glass-card p-5 rounded-xl transition-all duration-300 hover:shadow-lg">
                        <div class="flex items-center mb-4">
                            <div class="w-12 h-12 flex items-center justify-center rounded-lg bg-gradient-to-br from-purple-500 to-blue-500 mr-3">
                                <span class="text-white text-lg font-bold">A</span>
                            </div>
                            <div>
                                <h3 class="font-semibold text-lg">App Sample</h3>
                                <p class="text-sm text-gray-400">example.com</p>
                            </div>
                        </div>
                        <div class="flex justify-end space-x-2">
                            <button class="edit-btn px-3 py-1 bg-blue-500 hover:bg-blue-600 rounded text-sm transition">Edit</button>
                            <button class="delete-btn px-3 py-1 bg-red-500 hover:bg-red-600 rounded text-sm transition">Hapus</button>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Edit Modal (hidden by default) -->
        <div id="editModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50 p-4">
            <div class="glass-card p-6 rounded-xl w-full max-w-md">
                <h3 class="futuristic-font text-xl font-semibold mb-4">Edit Mini App</h3>
                <div class="mb-4">
                    <label class="block text-sm font-medium mb-1">Gambar</label>
                    <div class="flex items-center justify-center w-full h-20 border-2 border-gray-600 border-dashed rounded-lg cursor-pointer bg-gray-700 mb-2">
                        <span class="text-gray-400 text-sm">Upload gambar baru</span>
                    </div>
                    <input type="file" class="hidden" id="editAppImage">
                </div>
                <div class="mb-4">
                    <label for="editAppName" class="block text-sm font-medium mb-1">Nama</label>
                    <input type="text" id="editAppName" class="w-full px-4 py-2 rounded-lg bg-gray-700 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-purple-500">
                </div>
                <div class="mb-4">
                    <label for="editAppLink" class="block text-sm font-medium mb-1">Link</label>
                    <input type="url" id="editAppLink" class="w-full px-4 py-2 rounded-lg bg-gray-700 border border-gray-600 focus:outline-none focus:ring-2 focus:ring-purple-500">
                </div>
                <div class="flex justify-end space-x-3">
                    <button id="cancelEditBtn" class="px-4 py-2 bg-gray-600 hover:bg-gray-700 rounded-lg transition">Batal</button>
                    <button id="saveEditBtn" class="px-4 py-2 bg-gradient-to-r from-purple-500 to-blue-500 hover:opacity-90 rounded-lg transition">Simpan</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Sample data
        let miniApps = [
            { 
                id: 1, 
                name: "Kalkulator", 
                link: "https://calculator.com", 
                image: "https://cdn-icons-png.flaticon.com/512/2913/2913114.png" 
            },
            { 
                id: 2, 
                name: "Todo List", 
                link: "https://todolist.com", 
                image: "https://cdn-icons-png.flaticon.com/512/3652/3652191.png" 
            },
            { 
                id: 3, 
                name: "Cuaca", 
                link: "https://weather.com", 
                image: "https://cdn-icons-png.flaticon.com/512/1146/1146869.png" 
            }
        ];

        // DOM Elements
        const appsGrid = document.getElementById('appsGrid');
        const addAppBtn = document.getElementById('addAppBtn');
        const appNameInput = document.getElementById('appName');
        const appLinkInput = document.getElementById('appLink');
        const appImageInput = document.getElementById('appImage');
        const editModal = document.getElementById('editModal');
        const editAppName = document.getElementById('editAppName');
        const editAppLink = document.getElementById('editAppLink');
        const editAppImage = document.getElementById('editAppImage');
        const saveEditBtn = document.getElementById('saveEditBtn');
        const cancelEditBtn = document.getElementById('cancelEditBtn');
        const saveConfigBtn = document.getElementById('saveConfigBtn');
        const githubUsername = document.getElementById('githubUsername');
        const githubRepo = document.getElementById('githubRepo');
        const githubToken = document.getElementById('githubToken');

        // Current app being edited
        let currentEditAppId = null;

        // GitHub Configuration
        let githubConfig = {
            username: '',
            repo: '',
            token: ''
        };

        // Load saved configuration
        function loadConfig() {
            const savedConfig = localStorage.getItem('githubConfig');
            if (savedConfig) {
                githubConfig = JSON.parse(savedConfig);
                githubUsername.value = githubConfig.username || '';
                githubRepo.value = githubConfig.repo || '';
                githubToken.value = githubConfig.token || '';
            }
        }

        // Save configuration
        function saveConfig() {
            githubConfig = {
                username: githubUsername.value.trim(),
                repo: githubRepo.value.trim(),
                token: githubToken.value.trim()
            };
            localStorage.setItem('githubConfig', JSON.stringify(githubConfig));
            alert('Konfigurasi GitHub berhasil disimpan!');
        }

        // Render mini apps grid
        function renderApps() {
            appsGrid.innerHTML = '';
            
            miniApps.forEach(app => {
                const appElement = document.createElement('div');
                appElement.className = 'grid-item glass-card p-5 rounded-xl transition-all duration-300 hover:shadow-lg';
                appElement.innerHTML = `
                    <div class="flex items-center mb-4">
                        ${app.image ? 
                            `<img src="${app.image}" alt="${app.name}" class="w-12 h-12 rounded-lg object-cover mr-3">` : 
                            `<div class="w-12 h-12 flex items-center justify-center rounded-lg bg-gradient-to-br from-purple-500 to-blue-500 mr-3">
                                <span class="text-white text-lg font-bold">${app.name.charAt(0)}</span>
                            </div>`
                        }
                        <div>
                            <h3 class="font-semibold text-lg">${app.name}</h3>
                            <p class="text-sm text-gray-400">${app.link}</p>
                        </div>
                    </div>
                    <div class="flex justify-end space-x-2">
                        <button data-id="${app.id}" class="edit-btn px-3 py-1 bg-blue-500 hover:bg-blue-600 rounded text-sm transition">Edit</button>
                        <button data-id="${app.id}" class="delete-btn px-3 py-1 bg-red-500 hover:bg-red-600 rounded text-sm transition">Hapus</button>
                    </div>
                `;
                appsGrid.appendChild(appElement);
            });

            // Add event listeners to new buttons
            document.querySelectorAll('.edit-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const appId = parseInt(e.target.getAttribute('data-id'));
                    openEditModal(appId);
                });
            });

            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const appId = parseInt(e.target.getAttribute('data-id'));
                    deleteApp(appId);
                });
            });

            // Save to GitHub if configured
            saveToGitHub();
        }

        // Add a new mini app
        function addApp() {
            const name = appNameInput.value.trim();
            const link = appLinkInput.value.trim();
            
            if (!name || !link) {
                alert('Nama dan link aplikasi harus diisi!');
                return;
            }

            // Handle image upload
            let imageUrl = '';
            const file = appImageInput.files[0];
            if (file) {
                // In a real app, you would upload this to a server
                imageUrl = URL.createObjectURL(file);
            }

            const newApp = {
                id: Date.now(),
                name,
                link,
                image: imageUrl
            };

            miniApps.push(newApp);
            renderApps();
            
            // Reset form
            appNameInput.value = '';
            appLinkInput.value = '';
            appImageInput.value = '';
        }

        // Open edit modal
        function openEditModal(appId) {
            const app = miniApps.find(a => a.id === appId);
            if (!app) return;

            currentEditAppId = appId;
            editAppName.value = app.name;
            editAppLink.value = app.link;
            editModal.classList.remove('hidden');
        }

        // Save edited app
        function saveEditedApp() {
            const name = editAppName.value.trim();
            const link = editAppLink.value.trim();
            
            if (!name || !link) {
                alert('Nama dan link aplikasi harus diisi!');
                return;
            }

            // Handle image upload if any
            let imageUrl = '';
            const file = editAppImage.files[0];
            if (file) {
                imageUrl = URL.createObjectURL(file);
            } else {
                // Keep the existing image if no new one is uploaded
                const existingApp = miniApps.find(a => a.id === currentEditAppId);
                if (existingApp) {
                    imageUrl = existingApp.image;
                }
            }

            miniApps = miniApps.map(app => {
                if (app.id === currentEditAppId) {
                    return {
                        ...app,
                        name,
                        link,
                        image: imageUrl
                    };
                }
                return app;
            });

            renderApps();
            closeEditModal();
        }

        // Close edit modal
        function closeEditModal() {
            editModal.classList.add('hidden');
            currentEditAppId = null;
            editAppName.value = '';
            editAppLink.value = '';
            editAppImage.value = '';
        }

        // Delete an app
        function deleteApp(appId) {
            if (confirm('Apakah Anda yakin ingin menghapus aplikasi ini?')) {
                miniApps = miniApps.filter(app => app.id !== appId);
                renderApps();
            }
        }

        // Save data to GitHub
        async function saveToGitHub() {
            if (!githubConfig.username || !githubConfig.repo || !githubConfig.token) {
                return;
            }

            try {
                const data = {
                    miniApps,
                    updatedAt: new Date().toISOString()
                };

                const response = await fetch(`https://api.github.com/repos/${githubConfig.username}/${githubConfig.repo}/contents/editapp.json`, {
                    method: 'PUT',
                    headers: {
                        'Authorization': `token ${githubConfig.token}`,
                        'Content-Type': 'application/json',
                        'Accept': 'application/vnd.github.v3+json'
                    },
                    body: JSON.stringify({
                        message: `Update mini apps: ${new Date().toLocaleString()}`,
                        content: btoa(JSON.stringify(data))
                    })
                });

                if (!response.ok) {
                    throw new Error('Gagal menyimpan ke GitHub');
                }

                const result = await response.json();
                console.log('Data berhasil disimpan ke GitHub:', result);
            } catch (error) {
                console.error('Error menyimpan ke GitHub:', error);
            }
        }

        // Event listeners
        addAppBtn.addEventListener('click', addApp);
        saveEditBtn.addEventListener('click', saveEditedApp);
        cancelEditBtn.addEventListener('click', closeEditModal);
        saveConfigBtn.addEventListener('click', saveConfig);

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            loadConfig();
            renderApps();
            
            // Add floating animation to some elements
            const headers = document.querySelectorAll('h1, h2, h3');
            headers.forEach((header, index) => {
                if (index % 2 === 0) {
                    header.classList.add('floating');
                }
            });
        });
    </script>
</body>
</html>